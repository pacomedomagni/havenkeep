(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[297],{25554:function(e,t,r){Promise.resolve().then(r.bind(r,83130)),Promise.resolve().then(r.bind(r,42922))},40257:function(e,t,r){"use strict";var n,a;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(44227)},44227:function(e){!function(){var t={229:function(e){var t,r,n,a=e.exports={};function s(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var o=[],c=!1,d=-1;function u(){c&&n&&(c=!1,n.length?o=n.concat(o):d=-1,o.length&&h())}function h(){if(!c){var e=l(u);c=!0;for(var t=o.length;t;){for(n=o,o=[];++d<t;)n&&n[d].run();d=-1,t=o.length}n=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function x(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new x(e,t)),1!==o.length||c||l(h)},x.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var s=r[e]={exports:{}},i=!0;try{t[e](s,s.exports,n),i=!1}finally{i&&delete r[e]}return s.exports}n.ab="//";var a=n(229);e.exports=a}()},83130:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var n=r(57437),a=r(2265);let s=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}),i=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});function l(e){let{title:t,subtitle:r}=e;return(0,n.jsx)("div",{className:"bg-haven-surface border-b border-haven-border px-8 py-6",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-white",children:t}),r&&(0,n.jsx)("p",{className:"text-haven-text-secondary mt-1",children:r})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("button",{className:"p-2 text-haven-text-tertiary hover:text-white rounded-lg hover:bg-haven-elevated transition",children:(0,n.jsx)(s,{className:"h-6 w-6"})}),(0,n.jsx)("button",{className:"p-2 text-haven-text-tertiary hover:text-white rounded-lg hover:bg-haven-elevated transition",children:(0,n.jsx)(i,{className:"h-6 w-6"})})]})]})})}},42922:function(e,t,r){"use strict";r.d(t,{default:function(){return d}});var n=r(57437),a=r(2265),s=r(1442);let i=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),l=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"}))}),o=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});var c=r(71837);function d(e){let{users:t}=e,[r,d]=(0,a.useState)(t),[u,h]=(0,a.useState)(""),[x,m]=(0,a.useState)("all"),[p,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{if(p){let e=setTimeout(()=>f(null),4e3);return()=>clearTimeout(e)}},[p]);let v=r.filter(e=>{let t=e.email.toLowerCase().includes(u.toLowerCase())||e.full_name.toLowerCase().includes(u.toLowerCase()),r="all"===x||e.plan===x;return t&&r}),w=async e=>{if(confirm("Are you sure you want to suspend this user?"))try{await (0,c.x1)("/api/v1/admin/users/".concat(e,"/suspend"),{method:"PUT"}),d(r.map(t=>t.id===e?{...t,plan:"free"}:t)),f({message:"User suspended successfully",type:"success"})}catch(e){f({message:"Failed to suspend user. Please try again.",type:"error"})}},y=async e=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await (0,c.x1)("/api/v1/admin/users/".concat(e),{method:"DELETE"}),d(r.filter(t=>t.id!==e)),f({message:"User deleted successfully",type:"success"})}catch(e){f({message:"Failed to delete user. Please try again.",type:"error"})}};return(0,n.jsxs)("div",{children:[p&&(0,n.jsxs)("div",{className:"mb-4 flex items-center gap-2 rounded-lg px-4 py-3 text-sm ".concat("success"===p.type?"bg-haven-active/10 border border-haven-active/30 text-haven-active":"bg-haven-error/10 border border-haven-error/30 text-haven-error"),children:["success"===p.type?(0,n.jsx)(s.Z,{className:"h-5 w-5 flex-shrink-0"}):(0,n.jsx)(i,{className:"h-5 w-5 flex-shrink-0"}),p.message]}),(0,n.jsxs)("div",{className:"card mb-6",children:[(0,n.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:u,onChange:e=>h(e.target.value),className:"input-field"})}),(0,n.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"input-field w-auto",children:[(0,n.jsx)("option",{value:"all",children:"All Plans"}),(0,n.jsx)("option",{value:"free",children:"Free"}),(0,n.jsx)("option",{value:"premium",children:"Premium"})]})]}),(0,n.jsxs)("p",{className:"text-sm text-haven-text-tertiary mt-2",children:["Showing ",v.length," of ",r.length," users"]})]}),(0,n.jsx)("div",{className:"card p-0 overflow-hidden",children:(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border-b border-haven-border",children:[(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-haven-text-tertiary uppercase tracking-wider",children:"User"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-haven-text-tertiary uppercase tracking-wider",children:"Plan"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-haven-text-tertiary uppercase tracking-wider",children:"Items"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-haven-text-tertiary uppercase tracking-wider",children:"Value"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-haven-text-tertiary uppercase tracking-wider",children:"Joined"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-haven-text-tertiary uppercase tracking-wider",children:"Last Activity"}),(0,n.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-haven-text-tertiary uppercase tracking-wider",children:"Actions"})]})}),(0,n.jsx)("tbody",{className:"divide-y divide-haven-border",children:0===v.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-haven-text-tertiary",children:"No users found"})}):v.map(e=>(0,n.jsxs)("tr",{className:"hover:bg-haven-elevated/50 transition-colors",children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-medium text-white",children:e.full_name}),(0,n.jsx)("div",{className:"text-sm text-haven-text-secondary",children:e.email})]})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("premium"===e.plan?"bg-haven-primary/20 text-haven-primary":"bg-haven-elevated text-haven-text-secondary"),children:e.plan})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:e.total_items}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:["$",Number(e.total_value).toLocaleString()]}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-haven-text-secondary",children:new Date(e.created_at).toLocaleDateString()}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-haven-text-secondary",children:e.last_activity?new Date(e.last_activity).toLocaleDateString():"Never"}),(0,n.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,n.jsx)("button",{onClick:()=>w(e.id),className:"text-haven-warning hover:text-haven-warning/80 mr-3",title:"Suspend user",children:(0,n.jsx)(l,{className:"h-5 w-5"})}),(0,n.jsx)("button",{onClick:()=>y(e.id),className:"text-haven-error hover:text-haven-error/80",title:"Delete user",children:(0,n.jsx)(o,{className:"h-5 w-5"})})]})]},e.id))})]})})})]})}},71837:function(e,t,r){"use strict";r.d(t,{kS:function(){return i},x1:function(){return a}});let n=r(40257).env.NEXT_PUBLIC_API_URL||"";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:r="GET",body:a,headers:i={}}=t,l={method:r,credentials:"include",headers:{"Content-Type":"application/json",...i}};a&&"GET"!==r&&(l.body=JSON.stringify(a));let o=e.startsWith("http")?e:"".concat(n).concat(e),c=await fetch(o,l);if(!c.ok){let e=await c.json().catch(()=>({}));throw new s(e.message||e.error||"Request failed with status ".concat(c.status),c.status)}return c.json()}class s extends Error{constructor(e,t){super(e),this.status=t,this.name="ApiError"}}async function i(){await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),window.location.href="/login"}},1442:function(e,t,r){"use strict";var n=r(2265);let a=n.forwardRef(function(e,t){let{title:r,titleId:a,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=a}},function(e){e.O(0,[971,117,744],function(){return e(e.s=25554)}),_N_E=e.O()}]);