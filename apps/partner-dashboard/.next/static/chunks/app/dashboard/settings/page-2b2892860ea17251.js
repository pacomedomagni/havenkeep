(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{82779:function(e,t,r){Promise.resolve().then(r.bind(r,61199))},40257:function(e,t,r){"use strict";var n,a;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(a=r.g.process)?void 0:a.env)?r.g.process:r(44227)},12119:function(e,t,r){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return a}});let n=r(83079);function a(e){let{createServerReference:t}=r(6671);return t(e,n.callServer)}},44227:function(e){!function(){var t={229:function(e){var t,r,n,a=e.exports={};function s(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var c=[],l=!1,u=-1;function d(){l&&n&&(l=!1,n.length?c=n.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=o(d);l=!0;for(var t=c.length;t;){for(n=c,c=[];++u<t;)n&&n[u].run();u=-1,t=c.length}n=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||l||o(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var s=r[e]={exports:{}},i=!0;try{t[e](s,s.exports,n),i=!1}finally{i&&delete r[e]}return s.exports}n.ab="//";var a=n(229);e.exports=a}()},61199:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(57437),a=r(2265);r(83079);var s=(0,r(12119).$)("2c4453f41b0692311edf35ce80b7e7ecf5435d2c"),i=r(71837);function o(){let[e,t]=(0,a.useState)(""),[r,o]=(0,a.useState)("realtor"),[c,l]=(0,a.useState)(""),[u,d]=(0,a.useState)(""),[h,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!0),[x,v]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null);async function j(){try{let e=(await (0,i.x1)("/api/v1/partners/me")).data;e&&(t(e.company_name||""),o(e.partner_type||"realtor"),l(e.phone||""),d(Array.isArray(e.service_areas)?e.service_areas.join(", "):""))}catch(e){console.error("Error loading profile:",e)}finally{f(!1)}}async function g(t){t.preventDefault(),m(!0),b(null),v(!1);let n=new FormData;n.set("companyName",e),n.set("partnerType",r),n.set("phone",c),n.set("serviceAreas",u);let a=await s(n);(null==a?void 0:a.error)?b(a.error):(v(!0),setTimeout(()=>v(!1),3e3)),m(!1)}return((0,a.useEffect)(()=>{j()},[]),p)?(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-haven-primary"})}):(0,n.jsxs)("div",{className:"space-y-6 max-w-2xl",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Settings"}),(0,n.jsx)("p",{className:"text-haven-text-secondary text-sm mt-1",children:"Manage your partner profile"})]}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-white mb-6",children:"Partner Profile"}),(0,n.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[y&&(0,n.jsx)("div",{className:"bg-haven-error/10 border border-haven-error/30 rounded-lg px-4 py-3 text-sm text-haven-error",children:y}),x&&(0,n.jsx)("div",{className:"bg-haven-active/10 border border-haven-active/30 rounded-lg px-4 py-3 text-sm text-haven-active",children:"Profile updated successfully"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"companyName",className:"block text-sm font-medium text-haven-text-secondary mb-1.5",children:"Company name"}),(0,n.jsx)("input",{id:"companyName",type:"text",value:e,onChange:e=>t(e.target.value),className:"input-field",required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"partnerType",className:"block text-sm font-medium text-haven-text-secondary mb-1.5",children:"Partner type"}),(0,n.jsxs)("select",{id:"partnerType",value:r,onChange:e=>o(e.target.value),className:"input-field",children:[(0,n.jsx)("option",{value:"realtor",children:"Realtor"}),(0,n.jsx)("option",{value:"builder",children:"Builder"}),(0,n.jsx)("option",{value:"contractor",children:"Contractor"}),(0,n.jsx)("option",{value:"property_manager",children:"Property Manager"}),(0,n.jsx)("option",{value:"other",children:"Other"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("label",{htmlFor:"phone",className:"block text-sm font-medium text-haven-text-secondary mb-1.5",children:["Phone number ",(0,n.jsx)("span",{className:"text-haven-text-tertiary",children:"(optional)"})]}),(0,n.jsx)("input",{id:"phone",type:"tel",value:c,onChange:e=>l(e.target.value),className:"input-field",placeholder:"(555) 123-4567"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"serviceAreas",className:"block text-sm font-medium text-haven-text-secondary mb-1.5",children:"Service areas"}),(0,n.jsx)("input",{id:"serviceAreas",type:"text",value:u,onChange:e=>d(e.target.value),className:"input-field",required:!0}),(0,n.jsx)("p",{className:"text-xs text-haven-text-tertiary mt-1",children:"Separate multiple areas with commas"})]}),(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsx)("button",{type:"submit",disabled:h,className:"btn-primary",children:h?(0,n.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,n.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Saving..."]}):"Save changes"})})]})]})]})}},71837:function(e,t,r){"use strict";r.d(t,{kS:function(){return i},x1:function(){return a}});let n=r(40257).env.NEXT_PUBLIC_API_URL||"";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:r="GET",body:a,headers:i={}}=t,o={method:r,credentials:"include",headers:{"Content-Type":"application/json",...i}};a&&"GET"!==r&&(o.body=JSON.stringify(a));let c=e.startsWith("http")?e:"".concat(n).concat(e),l=await fetch(c,o);if(!l.ok){let e=await l.json().catch(()=>({}));throw new s(e.message||e.error||"Request failed with status ".concat(l.status),l.status)}return l.json()}class s extends Error{constructor(e,t){super(e),this.status=t,this.name="ApiError"}}async function i(){await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),window.location.href="/login"}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=82779)}),_N_E=e.O()}]);