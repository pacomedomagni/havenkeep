(()=>{var e={};e.id=171,e.ids=[171],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},94354:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>c,routeModule:()=>x,tree:()=>l}),a(4847),a(47164),a(22834),a(4906),a(77972),a(32029),a(35866);var t=a(23191),r=a(88716),n=a(37922),i=a.n(n),d=a(95231),o={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);a.d(s,o);let l=["",{children:["dashboard",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,4847)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/analytics/page.tsx"]}]},{loading:[()=>Promise.resolve().then(a.bind(a,47164)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/analytics/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,22834)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,4906)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/error.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,77972)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,32029)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/analytics/page.tsx"],h="/dashboard/analytics/page",m={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/analytics/page",pathname:"/dashboard/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},73575:(e,s,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},65360:()=>{},9545:(e,s,a)=>{Promise.resolve().then(a.bind(a,50639))},95452:(e,s,a)=>{Promise.resolve().then(a.bind(a,75133))},46148:(e,s,a)=>{Promise.resolve().then(a.bind(a,32727))},35303:()=>{},50639:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var t=a(10326),r=a(17577),n=a(30660),i=a(49844),d=a(18423),o=a(62637),l=a(9997),c=a(44675),h=a(8564),m=a(99630);let x=[{stage:"Gifts Sent",count:0,color:"#6C63FF"},{stage:"Activated",count:0,color:"#BB86FC"},{stage:"Active Users",count:0,color:"#4CAF50"},{stage:"Premium",count:0,color:"#FFC107"}];function p({data:e}){let s=e&&e.length>0?e:x;return t.jsx(n.h,{width:"100%",height:300,children:(0,t.jsxs)(i.v,{data:s,margin:{top:5,right:20,left:0,bottom:5},children:[t.jsx(d.q,{strokeDasharray:"3 3",stroke:"#2A2A2A"}),t.jsx(o.K,{dataKey:"stage",stroke:"#707070",fontSize:12,tickLine:!1,axisLine:{stroke:"#2A2A2A"}}),t.jsx(l.B,{stroke:"#707070",fontSize:12,tickLine:!1,axisLine:{stroke:"#2A2A2A"},allowDecimals:!1}),t.jsx(c.u,{contentStyle:{backgroundColor:"#1E1E1E",border:"1px solid #2A2A2A",borderRadius:"8px",color:"#FFFFFF"},labelStyle:{color:"#B0B0B0"}}),t.jsx(h.$,{dataKey:"count",radius:[6,6,0,0],children:s.map((e,s)=>t.jsx(m.b,{fill:e.color},`cell-${s}`))})]})})}var u=a(18069);function v(){let[e,s]=(0,r.useState)(null),[a,n]=(0,r.useState)(!0),[i,d]=(0,r.useState)(null),o=async()=>{try{d(null);let e=await (0,u.x1)("/api/v1/partners/analytics");e.success&&e.data&&s(e.data)}catch(e){d("Failed to load analytics data."),console.error("Error fetching analytics:",e)}finally{n(!1)}};if(a)return t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-haven-primary"})});let l=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Analytics"}),t.jsx("p",{className:"text-haven-text-secondary text-sm mt-1",children:"Deep dive into your referral performance and earnings"})]}),i&&(0,t.jsxs)("div",{className:"bg-haven-error/10 border border-haven-error/30 rounded-lg p-4 text-haven-error text-sm",children:[i,t.jsx("button",{onClick:o,className:"ml-2 underline",children:"Retry"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"card",children:[t.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Conversion Funnel"}),t.jsx("p",{className:"text-sm text-haven-text-secondary mb-4",children:"Track how referrals convert through each stage"}),t.jsx(p,{data:e?[{stage:"Total Gifts",count:e.total_gifts,color:"#6C63FF"},{stage:"Pending",count:e.pending_gifts,color:"#BB86FC"},{stage:"Activated",count:e.activated_gifts,color:"#4CAF50"}]:void 0})]}),(0,t.jsxs)("div",{className:"card",children:[t.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Commissions Breakdown"}),t.jsx("p",{className:"text-sm text-haven-text-secondary mb-4",children:"Your commission earnings summary"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-haven-border rounded-lg",children:[t.jsx("span",{className:"text-haven-text-secondary",children:"Total Earned"}),t.jsx("span",{className:"text-lg font-bold text-white",children:l(e?.total_commissions||0)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-haven-border rounded-lg",children:[t.jsx("span",{className:"text-haven-text-secondary",children:"Paid Out"}),t.jsx("span",{className:"text-lg font-bold text-haven-active",children:l(e?.paid_commissions||0)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-haven-border rounded-lg",children:[t.jsx("span",{className:"text-haven-text-secondary",children:"Pending"}),t.jsx("span",{className:"text-lg font-bold text-haven-warning",children:l(e?.pending_commissions||0)})]})]})]}),(0,t.jsxs)("div",{className:"card lg:col-span-2",children:[t.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Performance Summary"}),t.jsx("p",{className:"text-sm text-haven-text-secondary mb-4",children:"Key metrics for your partner activity"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-4 border border-haven-border rounded-lg",children:[t.jsx("div",{className:"text-3xl font-bold text-haven-primary",children:e?.total_gifts||0}),t.jsx("div",{className:"text-sm text-haven-text-secondary mt-1",children:"Total Gifts Sent"})]}),(0,t.jsxs)("div",{className:"text-center p-4 border border-haven-border rounded-lg",children:[t.jsx("div",{className:"text-3xl font-bold text-haven-active",children:e?.activated_gifts||0}),t.jsx("div",{className:"text-sm text-haven-text-secondary mt-1",children:"Gifts Activated"})]}),(0,t.jsxs)("div",{className:"text-center p-4 border border-haven-border rounded-lg",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-haven-warning",children:[e?.activation_rate||0,"%"]}),t.jsx("div",{className:"text-sm text-haven-text-secondary mt-1",children:"Activation Rate"})]})]})]})]})]})}},75133:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});var t=a(10326);function r({error:e,reset:s}){return t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsxs)("div",{className:"card max-w-md w-full text-center",children:[t.jsx("div",{className:"w-12 h-12 bg-haven-error/20 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-6 h-6 text-haven-error",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),t.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Something went wrong"}),t.jsx("p",{className:"text-sm text-haven-text-secondary mb-6",children:e.message||"An unexpected error occurred. Please try again."}),t.jsx("button",{onClick:s,className:"btn-primary px-6 py-2",children:"Try again"})]})})}a(17577)},32727:(e,s,a)=>{"use strict";a.d(s,{default:()=>p});var t=a(10326),r=a(90434),n=a(35047),i=a(60982),d=a(49658),o=a(16041),l=a(77327),c=a(75231),h=a(32704),m=a(18069);let x=[{name:"Dashboard",href:"/dashboard",icon:i.Z},{name:"Closing Gifts",href:"/dashboard/gifts",icon:d.Z},{name:"Referrals",href:"/dashboard/referrals",icon:o.Z},{name:"Analytics",href:"/dashboard/analytics",icon:o.Z},{name:"Commissions",href:"/dashboard/commissions",icon:l.Z},{name:"Settings",href:"/dashboard/settings",icon:c.Z}];function p(){let e=(0,n.usePathname)(),s=async()=>{await (0,m.kS)()};return(0,t.jsxs)("div",{className:"flex flex-col h-full bg-gray-900 w-64",children:[(0,t.jsxs)("div",{className:"flex items-center h-16 px-6 bg-gray-800",children:[(0,t.jsxs)("svg",{className:"w-8 h-8 mr-2 flex-shrink-0",viewBox:"0 0 64 64",fill:"none",children:[t.jsx("defs",{children:(0,t.jsxs)("linearGradient",{id:"sidebar-grad",x1:"8",y1:"4",x2:"56",y2:"63",gradientUnits:"userSpaceOnUse",children:[t.jsx("stop",{offset:"0%",stopColor:"#6366F1"}),t.jsx("stop",{offset:"100%",stopColor:"#8B5CF6"})]})}),t.jsx("path",{d:"M32 4L8 14v18c0 14.4 10.24 27.84 24 31 13.76-3.16 24-16.6 24-31V14L32 4z",fill:"url(#sidebar-grad)"}),t.jsx("path",{d:"M32 18L19 28v13h8v-8h10v8h8V28L32 18z",fill:"white",opacity:"0.95"}),t.jsx("path",{d:"M27 30l4 4 8-8",stroke:"#10B981",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),t.jsx("h1",{className:"text-xl font-bold text-white",children:"HavenKeep"}),t.jsx("span",{className:"ml-2 text-xs text-gray-400",children:"Partner"})]}),t.jsx("nav",{className:"flex-1 px-4 py-6 space-y-1",children:x.map(s=>{let a="/dashboard"===s.href?"/dashboard"===e:e.startsWith(s.href);return(0,t.jsxs)(r.default,{href:s.href,className:`
                flex items-center px-4 py-3 text-sm font-medium rounded-lg transition
                ${a?"bg-gray-800 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}
              `,children:[t.jsx(s.icon,{className:"h-5 w-5 mr-3"}),s.name]},s.name)})}),t.jsx("div",{className:"p-4 border-t border-gray-800",children:(0,t.jsxs)("button",{onClick:s,className:"flex items-center w-full px-4 py-3 text-sm font-medium text-gray-300 hover:bg-gray-800 hover:text-white rounded-lg transition",children:[t.jsx(h.Z,{className:"h-5 w-5 mr-3"}),"Sign Out"]})})]})}},18069:(e,s,a)=>{"use strict";a.d(s,{kS:()=>i,x1:()=>r});let t=process.env.NEXT_PUBLIC_API_URL||"";async function r(e,s={}){let{method:a="GET",body:r,headers:i={}}=s,d={method:a,credentials:"include",headers:{"Content-Type":"application/json",...i}};r&&"GET"!==a&&(d.body=JSON.stringify(r));let o=e.startsWith("http")?e:`${t}${e}`,l=await fetch(o,d);if(!l.ok){let e=await l.json().catch(()=>({}));throw new n(e.message||e.error||`Request failed with status ${l.status}`,l.status)}return l.json()}class n extends Error{constructor(e,s){super(e),this.status=s,this.name="ApiError"}}async function i(){await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),window.location.href="/login"}},47164:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});var t=a(19510);function r(){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"h-8 w-32 bg-haven-surface rounded-lg animate-pulse"}),t.jsx("div",{className:"h-4 w-56 bg-haven-surface rounded-lg animate-pulse mt-2"})]}),t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:Array.from({length:3}).map((e,s)=>(0,t.jsxs)("div",{className:`card animate-pulse ${2===s?"lg:col-span-2":""}`,children:[t.jsx("div",{className:"h-6 w-40 bg-haven-elevated rounded-lg mb-4"}),t.jsx("div",{className:"h-72 bg-haven-elevated rounded-lg"})]},s))})]})}},4847:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/analytics/page.tsx#default`)},4906:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/error.tsx#default`)},22834:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});var t=a(19510),r=a(16199);function n({children:e}){return(0,t.jsxs)("div",{className:"min-h-screen bg-haven-bg",children:[t.jsx(r.Z,{}),t.jsx("main",{className:"ml-64 p-8",children:e})]})}},77972:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});var t=a(19510);function r(){return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"h-8 w-48 bg-haven-surface rounded-lg animate-pulse"}),t.jsx("div",{className:"h-4 w-72 bg-haven-surface rounded-lg animate-pulse mt-2"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,s)=>(0,t.jsxs)("div",{className:"card animate-pulse",children:[t.jsx("div",{className:"h-10 w-10 bg-haven-elevated rounded-lg mb-4"}),t.jsx("div",{className:"h-8 w-20 bg-haven-elevated rounded-lg mb-2"}),t.jsx("div",{className:"h-4 w-28 bg-haven-elevated rounded-lg"})]},s))}),(0,t.jsxs)("div",{className:"card animate-pulse",children:[t.jsx("div",{className:"h-6 w-40 bg-haven-elevated rounded-lg mb-4"}),t.jsx("div",{className:"h-64 bg-haven-elevated rounded-lg"})]})]})}},32029:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>d,metadata:()=>i});var t=a(19510),r=a(45317),n=a.n(r);a(5023);let i={title:"HavenKeep Admin",description:"Admin dashboard for HavenKeep",icons:{icon:"/favicon.svg"}};function d({children:e}){return t.jsx("html",{lang:"en",children:t.jsx("body",{className:n().className,children:e})})}},16199:(e,s,a)=>{"use strict";a.d(s,{Z:()=>t});let t=(0,a(68570).createProxy)(String.raw`/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/components/sidebar.tsx#default`)},5023:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[276,347,434,578],()=>a(94354));module.exports=t})();