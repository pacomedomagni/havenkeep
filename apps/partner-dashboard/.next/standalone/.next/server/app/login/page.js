(()=>{var e={};e.id=626,e.ids=[626],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},92962:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d}),t(80974),t(32029),t(35866);var s=t(23191),a=t(88716),n=t(37922),o=t.n(n),i=t(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,80974)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,32029)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/login/page.tsx"],p="/login/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6114:(e,r,t)=>{let s={"631d7ef74204e7ca6b3307af3490e93eaf2db88f":()=>Promise.resolve().then(t.bind(t,35427)).then(e=>e.signIn)};async function a(e,...r){return(await s[e]()).apply(null,r)}e.exports={"631d7ef74204e7ca6b3307af3490e93eaf2db88f":a.bind(null,"631d7ef74204e7ca6b3307af3490e93eaf2db88f")}},73575:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},65360:()=>{},49162:(e,r,t)=>{Promise.resolve().then(t.bind(t,6836))},35047:(e,r,t)=>{"use strict";var s=t(77389);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}})},6836:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var s=t(10326),a=t(17577);t(15424);var n=(0,t(46242).$)("631d7ef74204e7ca6b3307af3490e93eaf2db88f"),o=t(35047);function i(){let e=(0,o.useRouter)(),[r,t]=(0,a.useState)(!1),[i,l]=(0,a.useState)(null),d=async r=>{r.preventDefault(),t(!0),l(null);let s=new FormData(r.currentTarget);try{let r=await n(s);r?.error?l(r.error):(e.push("/dashboard"),e.refresh())}catch{}finally{t(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-50 to-primary-100",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-xl p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"flex justify-center mb-4",children:(0,s.jsxs)("svg",{className:"w-14 h-14",viewBox:"0 0 64 64",fill:"none",children:[s.jsx("defs",{children:(0,s.jsxs)("linearGradient",{id:"login-grad",x1:"8",y1:"4",x2:"56",y2:"63",gradientUnits:"userSpaceOnUse",children:[s.jsx("stop",{offset:"0%",stopColor:"#6366F1"}),s.jsx("stop",{offset:"100%",stopColor:"#8B5CF6"})]})}),s.jsx("path",{d:"M32 4L8 14v18c0 14.4 10.24 27.84 24 31 13.76-3.16 24-16.6 24-31V14L32 4z",fill:"url(#login-grad)"}),s.jsx("path",{d:"M32 18L19 28v13h8v-8h10v8h8V28L32 18z",fill:"white",opacity:"0.95"}),s.jsx("path",{d:"M27 30l4 4 8-8",stroke:"#10B981",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"HavenKeep Admin"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to access the dashboard"})]}),(0,s.jsxs)("form",{onSubmit:d,className:"space-y-6",children:[i&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"admin@havenkeep.com"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"••••••••"})]}),s.jsx("button",{type:"submit",disabled:r,className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-medium py-2 px-4 rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Signing in...":"Sign In"})]})]})})}},32029:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i,metadata:()=>o});var s=t(19510),a=t(45317),n=t.n(a);t(5023);let o={title:"HavenKeep Admin",description:"Admin dashboard for HavenKeep",icons:{icon:"/favicon.svg"}};function i({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:n().className,children:e})})}},35427:(e,r,t)=>{"use strict";t.r(r),t.d(r,{signIn:()=>d});var s=t(27745);t(26461);var a=t(53973),n=t(74739),o=t(48608),i=t(85723);let l=process.env.API_URL||"http://localhost:3000";async function d(e){let r=e.get("email"),t=e.get("password");if(!r||!t)return{error:"Email and password are required"};try{let e=await fetch(`${l}/api/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:t})});if(!e.ok){let r=await e.json().catch(()=>({}));return{error:r.error||r.message||"Invalid credentials"}}let s=await e.json();if(!s.user?.is_admin&&!s.user?.is_partner)return{error:"Access restricted to partners and administrators"};let n=await (0,a.cookies)();(0,o.BV)(s.accessToken,s.refreshToken,n)}catch{return{error:"Unable to connect to the server"}}(0,n.redirect)("/dashboard")}(0,i.h)([d]),(0,s.j)("631d7ef74204e7ca6b3307af3490e93eaf2db88f",d)},80974:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(68570).createProxy)(String.raw`/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/login/page.tsx#default`)},48608:(e,r,t)=>{"use strict";t.d(r,{BV:()=>l,D6:()=>d});var s=t(53973);t(74739);let a=process.env.API_URL||"http://localhost:3000",n="hk_access_token",o="hk_refresh_token";async function i(){let e=await (0,s.cookies)(),r=e.get(n)?.value,t=e.get(o)?.value;return r&&t?{accessToken:r,refreshToken:t}:null}function l(e,r,t){t.set(n,e,{httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:3600}),t.set(o,r,{httpOnly:!0,secure:!0,sameSite:"lax",path:"/",maxAge:604800})}async function d(e,r={}){let t=await i(),{method:s="GET",body:n,headers:o={}}=r,l={method:s,headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t.accessToken}`}:{},...o},cache:"no-store"};n&&"GET"!==s&&(l.body=JSON.stringify(n));let d=`${a}${e}`,c=await fetch(d,l);if(!c.ok){let e=await c.json().catch(()=>({}));throw Error(e.error||e.message||`API request failed with status ${c.status}`)}return c.json()}},5023:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,347,366],()=>t(92962));module.exports=s})();