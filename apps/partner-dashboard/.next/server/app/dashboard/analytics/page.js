(()=>{var e={};e.id=171,e.ids=[171],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},17173:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(4847),t(47164),t(22834),t(4906),t(77972),t(32029),t(35866);var a=t(23191),r=t(88716),n=t(37922),o=t.n(n),i=t(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(s,l);let d=["",{children:["dashboard",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4847)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/analytics/page.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,47164)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/analytics/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,22834)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,4906)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,77972)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,32029)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/analytics/page.tsx"],h="/dashboard/analytics/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/analytics/page",pathname:"/dashboard/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},73575:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,12994,23)),Promise.resolve().then(t.t.bind(t,96114,23)),Promise.resolve().then(t.t.bind(t,9727,23)),Promise.resolve().then(t.t.bind(t,79671,23)),Promise.resolve().then(t.t.bind(t,41868,23)),Promise.resolve().then(t.t.bind(t,84759,23))},65360:()=>{},9545:(e,s,t)=>{Promise.resolve().then(t.bind(t,22401))},95452:(e,s,t)=>{Promise.resolve().then(t.bind(t,75133))},70029:(e,s,t)=>{Promise.resolve().then(t.bind(t,32727))},35303:()=>{},22401:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>y});var a=t(10326),r=t(17577),n=t(30660),o=t(49844),i=t(18423),l=t(62637),d=t(9997),c=t(44675),h=t(8564),m=t(99630);let x=[{stage:"Gifts Sent",count:0,color:"#6C63FF"},{stage:"Activated",count:0,color:"#BB86FC"},{stage:"Active Users",count:0,color:"#4CAF50"},{stage:"Premium",count:0,color:"#FFC107"}];function p({data:e}){let s=e&&e.length>0?e:x;return a.jsx(n.h,{width:"100%",height:300,children:(0,a.jsxs)(o.v,{data:s,margin:{top:5,right:20,left:0,bottom:5},children:[a.jsx(i.q,{strokeDasharray:"3 3",stroke:"#2A2A2A"}),a.jsx(l.K,{dataKey:"stage",stroke:"#707070",fontSize:12,tickLine:!1,axisLine:{stroke:"#2A2A2A"}}),a.jsx(d.B,{stroke:"#707070",fontSize:12,tickLine:!1,axisLine:{stroke:"#2A2A2A"},allowDecimals:!1}),a.jsx(c.u,{contentStyle:{backgroundColor:"#1E1E1E",border:"1px solid #2A2A2A",borderRadius:"8px",color:"#FFFFFF"},labelStyle:{color:"#B0B0B0"}}),a.jsx(h.$,{dataKey:"count",radius:[6,6,0,0],children:s.map((e,s)=>a.jsx(m.b,{fill:e.color},`cell-${s}`))})]})})}var u=t(14958),g=t(74390);let v=Array.from({length:12},(e,s)=>{let t=new Date;return t.setMonth(t.getMonth()-(11-s)),{month:t.toLocaleString("default",{month:"short"}),earnings:0}});function f({data:e}){let s=e&&e.length>0?e:v;return a.jsx(n.h,{width:"100%",height:300,children:(0,a.jsxs)(u.w,{data:s,margin:{top:5,right:20,left:0,bottom:5},children:[a.jsx(i.q,{strokeDasharray:"3 3",stroke:"#2A2A2A"}),a.jsx(l.K,{dataKey:"month",stroke:"#707070",fontSize:12,tickLine:!1,axisLine:{stroke:"#2A2A2A"}}),a.jsx(d.B,{stroke:"#707070",fontSize:12,tickLine:!1,axisLine:{stroke:"#2A2A2A"},tickFormatter:e=>`$${e}`}),a.jsx(c.u,{contentStyle:{backgroundColor:"#1E1E1E",border:"1px solid #2A2A2A",borderRadius:"8px",color:"#FFFFFF"},labelStyle:{color:"#B0B0B0"},formatter:e=>[`$${e}`,"Earnings"]}),a.jsx(g.x,{type:"monotone",dataKey:"earnings",stroke:"#4CAF50",strokeWidth:2,dot:{fill:"#4CAF50",strokeWidth:0,r:4},activeDot:{r:6,fill:"#4CAF50"}})]})})}function b({data:e}){return e&&0!==e.length?a.jsx(n.h,{width:"100%",height:300,children:(0,a.jsxs)(o.v,{data:e,layout:"vertical",margin:{top:5,right:20,left:20,bottom:5},children:[a.jsx(i.q,{strokeDasharray:"3 3",stroke:"#2A2A2A",horizontal:!1}),a.jsx(l.K,{type:"number",stroke:"#707070",fontSize:12,tickLine:!1,axisLine:{stroke:"#2A2A2A"},allowDecimals:!1}),a.jsx(d.B,{type:"category",dataKey:"code",stroke:"#707070",fontSize:11,tickLine:!1,axisLine:{stroke:"#2A2A2A"},width:120}),a.jsx(c.u,{contentStyle:{backgroundColor:"#1E1E1E",border:"1px solid #2A2A2A",borderRadius:"8px",color:"#FFFFFF"},labelStyle:{color:"#B0B0B0"}}),a.jsx(h.$,{dataKey:"conversions",fill:"#BB86FC",radius:[0,6,6,0]})]})}):a.jsx("div",{className:"flex items-center justify-center h-[300px] text-haven-text-tertiary text-sm",children:"No referral data yet. Send your first gift to get started."})}var j=t(18069);function y(){let[e,s]=(0,r.useState)({}),[t,n]=(0,r.useState)(!0),[o,i]=(0,r.useState)(null),l=async()=>{try{i(null);let e=await (0,j.x1)("/api/v1/partners/analytics");e.success&&e.data&&s(e.data)}catch(e){i("Failed to load analytics data."),console.error("Error fetching analytics:",e)}finally{n(!1)}};return t?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-haven-primary"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Analytics"}),a.jsx("p",{className:"text-haven-text-secondary text-sm mt-1",children:"Deep dive into your referral performance and earnings"})]}),o&&(0,a.jsxs)("div",{className:"bg-haven-error/10 border border-haven-error/30 rounded-lg p-4 text-haven-error text-sm",children:[o,a.jsx("button",{onClick:l,className:"ml-2 underline",children:"Retry"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Conversion Funnel"}),a.jsx("p",{className:"text-sm text-haven-text-secondary mb-4",children:"Track how referrals convert through each stage"}),a.jsx(p,{data:e.funnel?[{stage:"Gifts Sent",count:e.funnel.sent,color:"#6C63FF"},{stage:"Opened",count:e.funnel.opened,color:"#BB86FC"},{stage:"Activated",count:e.funnel.activated,color:"#4CAF50"},{stage:"Converted",count:e.funnel.converted,color:"#FFC107"}]:void 0})]}),(0,a.jsxs)("div",{className:"card",children:[a.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Monthly Earnings"}),a.jsx("p",{className:"text-sm text-haven-text-secondary mb-4",children:"Your commission earnings over the past 12 months"}),a.jsx(f,{data:e.earnings_by_month})]}),(0,a.jsxs)("div",{className:"card lg:col-span-2",children:[a.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Top Performing Referral Codes"}),a.jsx("p",{className:"text-sm text-haven-text-secondary mb-4",children:"Your most successful referral codes by number of conversions"}),a.jsx(b,{data:e.top_referrals})]})]})]})}},75133:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(10326);function r({error:e,reset:s}){return a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsxs)("div",{className:"card max-w-md w-full text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-haven-error/20 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-6 h-6 text-haven-error",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),a.jsx("h2",{className:"text-lg font-semibold text-white mb-2",children:"Something went wrong"}),a.jsx("p",{className:"text-sm text-haven-text-secondary mb-6",children:e.message||"An unexpected error occurred. Please try again."}),a.jsx("button",{onClick:s,className:"btn-primary px-6 py-2",children:"Try again"})]})})}t(17577)},32727:(e,s,t)=>{"use strict";t.d(s,{default:()=>p});var a=t(10326),r=t(90434),n=t(35047),o=t(60982),i=t(49658),l=t(16041),d=t(77327),c=t(75231),h=t(32704),m=t(18069);let x=[{name:"Dashboard",href:"/dashboard",icon:o.Z},{name:"Closing Gifts",href:"/dashboard/gifts",icon:i.Z},{name:"Referrals",href:"/dashboard/referrals",icon:l.Z},{name:"Analytics",href:"/dashboard/analytics",icon:l.Z},{name:"Commissions",href:"/dashboard/commissions",icon:d.Z},{name:"Settings",href:"/dashboard/settings",icon:c.Z}];function p(){let e=(0,n.usePathname)(),s=async()=>{await (0,m.kS)()};return(0,a.jsxs)("div",{className:"flex flex-col h-full bg-gray-900 w-64",children:[(0,a.jsxs)("div",{className:"flex items-center h-16 px-6 bg-gray-800",children:[(0,a.jsxs)("svg",{className:"w-8 h-8 mr-2 flex-shrink-0",viewBox:"0 0 64 64",fill:"none",children:[a.jsx("defs",{children:(0,a.jsxs)("linearGradient",{id:"sidebar-grad",x1:"8",y1:"4",x2:"56",y2:"63",gradientUnits:"userSpaceOnUse",children:[a.jsx("stop",{offset:"0%",stopColor:"#6366F1"}),a.jsx("stop",{offset:"100%",stopColor:"#8B5CF6"})]})}),a.jsx("path",{d:"M32 4L8 14v18c0 14.4 10.24 27.84 24 31 13.76-3.16 24-16.6 24-31V14L32 4z",fill:"url(#sidebar-grad)"}),a.jsx("path",{d:"M32 18L19 28v13h8v-8h10v8h8V28L32 18z",fill:"white",opacity:"0.95"}),a.jsx("path",{d:"M27 30l4 4 8-8",stroke:"#10B981",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),a.jsx("h1",{className:"text-xl font-bold text-white",children:"HavenKeep"}),a.jsx("span",{className:"ml-2 text-xs text-gray-400",children:"Partner"})]}),a.jsx("nav",{className:"flex-1 px-4 py-6 space-y-1",children:x.map(s=>{let t="/dashboard"===s.href?"/dashboard"===e:e.startsWith(s.href);return(0,a.jsxs)(r.default,{href:s.href,className:`
                flex items-center px-4 py-3 text-sm font-medium rounded-lg transition
                ${t?"bg-gray-800 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"}
              `,children:[a.jsx(s.icon,{className:"h-5 w-5 mr-3"}),s.name]},s.name)})}),a.jsx("div",{className:"p-4 border-t border-gray-800",children:(0,a.jsxs)("button",{onClick:s,className:"flex items-center w-full px-4 py-3 text-sm font-medium text-gray-300 hover:bg-gray-800 hover:text-white rounded-lg transition",children:[a.jsx(h.Z,{className:"h-5 w-5 mr-3"}),"Sign Out"]})})]})}},18069:(e,s,t)=>{"use strict";t.d(s,{kS:()=>o,x1:()=>r});let a=process.env.NEXT_PUBLIC_API_URL||"";async function r(e,s={}){let{method:t="GET",body:r,headers:o={}}=s,i={method:t,credentials:"include",headers:{"Content-Type":"application/json",...o}};r&&"GET"!==t&&(i.body=JSON.stringify(r));let l=e.startsWith("http")?e:`${a}${e}`,d=await fetch(l,i);if(!d.ok){let e=await d.json().catch(()=>({}));throw new n(e.message||e.error||`Request failed with status ${d.status}`,d.status)}return d.json()}class n extends Error{constructor(e,s){super(e),this.status=s,this.name="ApiError"}}async function o(){await fetch("/api/auth/logout",{method:"POST",credentials:"include"}),window.location.href="/login"}},47164:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(19510);function r(){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"h-8 w-32 bg-haven-surface rounded-lg animate-pulse"}),a.jsx("div",{className:"h-4 w-56 bg-haven-surface rounded-lg animate-pulse mt-2"})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:Array.from({length:3}).map((e,s)=>(0,a.jsxs)("div",{className:`card animate-pulse ${2===s?"lg:col-span-2":""}`,children:[a.jsx("div",{className:"h-6 w-40 bg-haven-elevated rounded-lg mb-4"}),a.jsx("div",{className:"h-72 bg-haven-elevated rounded-lg"})]},s))})]})}},4847:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/analytics/page.tsx#default`)},4906:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/error.tsx#default`)},22834:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(19510),r=t(16199);function n({children:e}){return(0,a.jsxs)("div",{className:"min-h-screen bg-haven-bg",children:[a.jsx(r.Z,{}),a.jsx("main",{className:"ml-64 p-8",children:e})]})}},77972:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(19510);function r(){return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"h-8 w-48 bg-haven-surface rounded-lg animate-pulse"}),a.jsx("div",{className:"h-4 w-72 bg-haven-surface rounded-lg animate-pulse mt-2"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,s)=>(0,a.jsxs)("div",{className:"card animate-pulse",children:[a.jsx("div",{className:"h-10 w-10 bg-haven-elevated rounded-lg mb-4"}),a.jsx("div",{className:"h-8 w-20 bg-haven-elevated rounded-lg mb-2"}),a.jsx("div",{className:"h-4 w-28 bg-haven-elevated rounded-lg"})]},s))}),(0,a.jsxs)("div",{className:"card animate-pulse",children:[a.jsx("div",{className:"h-6 w-40 bg-haven-elevated rounded-lg mb-4"}),a.jsx("div",{className:"h-64 bg-haven-elevated rounded-lg"})]})]})}},32029:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i,metadata:()=>o});var a=t(19510),r=t(45317),n=t.n(r);t(5023);let o={title:"HavenKeep Admin",description:"Admin dashboard for HavenKeep",icons:{icon:"/favicon.svg"}};function i({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{className:n().className,children:e})})}},16199:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/components/sidebar.tsx#default`)},5023:()=>{}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[276,347,434,253],()=>t(17173));module.exports=a})();