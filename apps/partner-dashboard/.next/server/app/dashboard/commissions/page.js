(()=>{var e={};e.id=903,e.ids=[903],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},35041:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>d.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>l,routeModule:()=>x,tree:()=>c}),a(69738),a(98023),a(22834),a(4906),a(77972),a(32029),a(35866);var t=a(23191),r=a(88716),n=a(37922),d=a.n(n),i=a(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(s,o);let c=["",{children:["dashboard",{children:["commissions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,69738)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/commissions/page.tsx"]}]},{loading:[()=>Promise.resolve().then(a.bind(a,98023)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/commissions/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,22834)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/layout.tsx"],error:[()=>Promise.resolve().then(a.bind(a,4906)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/error.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,77972)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,32029)),"/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],l=["/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/commissions/page.tsx"],m="/dashboard/commissions/page",p={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/commissions/page",pathname:"/dashboard/commissions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},43037:(e,s,a)=>{Promise.resolve().then(a.bind(a,61546))},61546:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var t=a(10326),r=a(17577);function n({status:e}){return t.jsx("span",{className:"paid"===e?"badge-paid":"pending"===e?"badge-pending":"badge-cancelled",children:e.charAt(0).toUpperCase()+e.slice(1)})}function d({commissions:e}){return t.jsx("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[t.jsx("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-haven-border",children:[t.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-haven-text-tertiary uppercase tracking-wider",children:"Referral Code"}),t.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-haven-text-tertiary uppercase tracking-wider",children:"User"}),t.jsx("th",{className:"text-right py-3 px-4 text-xs font-medium text-haven-text-tertiary uppercase tracking-wider",children:"Amount"}),t.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-haven-text-tertiary uppercase tracking-wider",children:"Status"}),t.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-haven-text-tertiary uppercase tracking-wider",children:"Date"})]})}),(0,t.jsxs)("tbody",{className:"divide-y divide-haven-border",children:[e.map(e=>{var s;return(0,t.jsxs)("tr",{className:"hover:bg-haven-elevated/50 transition-colors",children:[t.jsx("td",{className:"py-3 px-4 text-sm font-mono text-haven-primary",children:e.referralId}),t.jsx("td",{className:"py-3 px-4 text-sm text-haven-text-secondary",children:e.partnerId}),t.jsx("td",{className:"py-3 px-4 text-sm text-white font-medium text-right",children:(s=e.amount,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s))}),t.jsx("td",{className:"py-3 px-4",children:t.jsx(n,{status:e.status})}),t.jsx("td",{className:"py-3 px-4 text-sm text-haven-text-secondary",children:new Date(e.createdAt).toLocaleDateString()})]},e.id)}),0===e.length&&t.jsx("tr",{children:t.jsx("td",{colSpan:5,className:"py-8 text-center text-haven-text-tertiary",children:"No commissions found"})})]})]})})}var i=a(86421),o=a(14526),c=a(18069);function l(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function m(){let[e,s]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[m,p]=(0,r.useState)(null),x=async()=>{try{p(null);let e=await (0,c.x1)("/api/v1/partners/commissions");if(e.success){let a=(e.data||[]).map(e=>({id:e.id,partnerId:e.partner_id,referralId:e.reference_id||e.id,amount:parseFloat(e.amount),status:e.status,paidAt:e.paid_at,createdAt:e.created_at}));s(a)}}catch(e){p("Failed to load commissions. Please try again."),console.error("Error fetching commissions:",e)}finally{n(!1)}},h=e.filter(e=>"pending"===e.status).reduce((e,s)=>e+s.amount,0),u=e.filter(e=>"paid"===e.status).reduce((e,s)=>e+s.amount,0);return a?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-haven-primary"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-white",children:"Commissions"}),t.jsx("p",{className:"text-haven-text-secondary text-sm mt-1",children:"Track your earnings from referral conversions"})]}),m&&(0,t.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 rounded-lg p-4 text-red-400 text-sm",children:[m,t.jsx("button",{onClick:x,className:"ml-2 underline",children:"Retry"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(i.Z,{className:"w-5 h-5 text-haven-warning"}),t.jsx("span",{className:"text-sm text-haven-text-secondary",children:"Pending Commissions"})]}),t.jsx("p",{className:"text-2xl font-bold text-haven-warning",children:l(h)})]}),(0,t.jsxs)("div",{className:"card",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[t.jsx(o.Z,{className:"w-5 h-5 text-haven-active"}),t.jsx("span",{className:"text-sm text-haven-text-secondary",children:"Total Paid"})]}),t.jsx("p",{className:"text-2xl font-bold text-haven-active",children:l(u)})]})]}),t.jsx("div",{className:"card p-0 overflow-hidden",children:t.jsx(d,{commissions:e})})]})}},98023:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});var t=a(19510);function r(){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[t.jsx("div",{className:"h-8 w-40 bg-haven-surface rounded-lg animate-pulse"}),t.jsx("div",{className:"h-4 w-64 bg-haven-surface rounded-lg animate-pulse mt-2"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Array.from({length:2}).map((e,s)=>(0,t.jsxs)("div",{className:"card animate-pulse",children:[t.jsx("div",{className:"h-4 w-32 bg-haven-elevated rounded-lg mb-2"}),t.jsx("div",{className:"h-8 w-24 bg-haven-elevated rounded-lg"})]},s))}),t.jsx("div",{className:"card animate-pulse",children:(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("div",{className:"h-10 bg-haven-elevated rounded-lg"}),Array.from({length:5}).map((e,s)=>t.jsx("div",{className:"h-12 bg-haven-elevated rounded-lg"},s))]})})]})}},69738:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(68570).createProxy)(String.raw`/Users/pacomedomagni/Projects/havenkeep/apps/partner-dashboard/src/app/dashboard/commissions/page.tsx#default`)}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[276,347,434,601],()=>a(35041));module.exports=t})();